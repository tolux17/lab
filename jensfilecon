pipeline {

    agent any
    environment {
        BRANCH_NAME='main'
    }

    stages {

        stage ("build") {
            when {

                expression {
                    BRANCH_NAME == "dev"
                }
            }

            steps {

                echo "it is working"
            }
        }

        stage ('Test') {

            steps {

                echo "it is testing"
            }
        }

        stage ("deploy") {

            steps {

                echo "I am deploying"
            }
        }
        
    }
    post {

        always {
            echo "It ran well"
        }

        failure {

            echo "it failed"
        }

        success {

            echo "worked"
        }
    }

}