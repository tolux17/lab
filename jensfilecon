pipeline {

    agent any
    environment {
        BRANCH_NAME='main'
        SERVER_CREDENTIALS=credentials('PLAY-PLAY')
    }
    parameters {

        booleanParam(name: "Branch", defaultValue: true, description: "true or false")
        choice(name: "Servers", choices: ['1.74','3.74','6.2'], description: "Used to pick server types")
    }

    stages {

        stage ("build") {
            when {

                expression {
                    BRANCH_NAME == "dev"
                }
            }

            steps {

                echo "it is working"
            }
        }

        stage ('Test') {

            when {

                expression {
                    params.Servers
                }
            }

            steps {

                echo "it is testing"
            }
        }

        stage ("deploy") {

            steps {

                echo "I am deploying"
            }
        }
        
    }
    post {

        always {
            echo "It ran well"
        }

        failure {

            echo "it failed"
        }

        success {

            echo "worked"
        }
    }

}