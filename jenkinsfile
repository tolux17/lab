pipeline {
    agent any

    environment {
        AUTHOR = "JULIUS"
        
    }

    stages {
        stage ('test')  {

            when {
                branch main
            }
           
            
            steps {
                echo 'We are testing'
                echo "Our writer is ${AUTHOR}"
                
            }
        }

        stage ('build') {
            steps {
                echo 'We are building'
                echo "Our writer is ${AUTHOR}"
            }
        }

        stage ('deploy') {
            environment {
                CLASS = "DEVOPS"
            }
            steps {
                echo 'We are deploying'
                echo "This is ${CLASS}"
            }
        }
    }
    post {
        always {
            echo 'our code ran'
        }
        success {
            echo 'our code was successful'
        }
        failure {
            echo 'our code failed'
        }
    }
}