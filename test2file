pipeline {

    agent any

    environment {
        NEW_VERSION = "1.3.0"

        CLASS = "CLASS OF 13"

        AUTHOR = "TOLULOPE GBADAMOSI"

        BRANCH_NAME ="main"
    }

    stages {

        stage ("build") {

        

            steps {

                echo "I am building.."
                echo "Building ${NEW_VERSION} "
                echo "I AM ${AUTHOR}"
            }
        }

        stage ("test") {

            when {

                expression {

                    BRANCH_NAME == "master"
                }
            }

            steps {

                echo "I am testing.."
            }
        }

        stage ("deploy") {

            steps {

                echo "I am deploying.."
            }
        }
    }
    post {
        always {
            echo "We are testing the pipeline"
        }

        success {

            echo "Our pipeline is successfully run"
        }

        failure {

            echo "Our pipeline failed"
        }
    }
}
