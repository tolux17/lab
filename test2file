pipeline {

    agent any

    stages {

        stage ("build") {

            when {

                expression {

                    BRANCH_NAME == "dev" || BRANCH_NAME == "master"
                }
            }

            steps {

                echo "I am building.."
            }
        }

        stage ("test") {

            steps {

                echo "I am testing.."
            }
        }

        stage ("deploy") {

            steps {

                echo "I am deploying.."
            }
        }
    }
    post {
        always {
            echo "We are testing the pipeline"
        }

        success {

            echo "Our pipeline is successfully run"
        }

        failure {

            echo "Our pipeline failed"
        }
    }
}
